<!doctype html>
<html lang="en">
<head>
	<title>Обзор ES2015(ES6)</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=680, user-scalable=no">
	<meta http-equiv="x-ua-compatible" content="ie=edge">
	<link rel="stylesheet" href="styles/screen.css">
	<style>
		pre,
		.slide pre {
			margin: 0;
		}
		#shtil h2 {
			color:#FFF;
		}
	</style>
</head>
<body class="list">
	
	<header class="caption">
		<h1 id="overivew-es2015-aka-es6-">Обзор ES2015(ES6)</h1>
		<p><a href="http://alfilatov.com">Aleksandr Filatov</a></p>
	</header>
	<section class="slide" id="Introduction">
		<div>
			<h2>Обзор ES2015(ES6)</h2>
			<img src="pictures/ecma262.jpg" alt="ecma262">
		</div>
	</section>

	<section class="slide cover" id="shtil">
		<div>
			<h2>10 лет в мире JavaScript был штиль...</h2>
			<img src="pictures/shtil.jpg" alt="">
			<style>
				#shtil h2 {
					color:#FFF;
				}
			</style>
		</div>
	</section>

	<section class="slide shout">
		<div>
			<h2>Как вдруг...</h2>
		</div>
	</section>
	
	<section class="slide">
		<div>
			<p>17 июня 2015 года генеральное собрание Ecma International официально одобрило стандарт ECMA-262 6 версии</p>
			<img src="pictures/approved.gif" id="approved" alt="approved" class="shrink">
			<style>
				#approved {
					float: right;
					margin-right: -5em;
				}
				.slide p {
				  margin: 0 0 -10px;
				}
			</style>
		</div>
	</section>
	
	<section class="slide shout">
		<div>
			<h2>Термины</h2>
		</div>
	</section>
	
	<section class="slide">
		<div>
			<ul>
				<li>TC39 (Ecma Technical Committee 39): комитет по развитию стандарта ECMA-262.<ul>
				<li>Члены: компании (основные разработчики браузеров).</li>
				<li>Собрания: участие сотрудников и приглашенных экспертов.</li>
				</ul>
				</li>
				<li>ECMAScript: официальное название языка<ul>
				<li>Версии: ECMAScript 5 - &quot;Спецификация языка ECMAScript, редакция 5&quot;</li>
				</ul>
				</li>
				<li>JavaScript - это диалект языка ECMAScript</li>
				<li>ECMAScript Harmony: улучшения после ECMAScript 5 (ECMAScript 6 и 7)</li>
				<li>ECMAScript.next: кодовое название ECMAScript 6</li>
			</ul>		
		</div>
	</section>

	<section class="slide shout">
		<div>
			<h2>История</h2>
		</div>
	</section>

	<section class="slide">
		<div>
			<h2>История</h2>
			<center>
				<img src="pictures/history.png" alt="">
			</center>
		</div>
	</section>
	
	<section class="slide shout">
		<div>
			<h2>Что нового?</h2>
		</div>
	</section>
	
	<section class="slide">
		<div>
			<h2>Шаблоны строк</h2>
			<ul>
				<li>"В ES5 \n - это перенос строки."</li>
			</ul>
			<pre class="next">
				<code class="language-javascript">`В ES6 стало можно</code>
				<code>писать так.`</code>
			</pre>
			<br/>
			<pre class="next">
				<code class="language-javascript">var name = 'John', age = 22;</code>
				<code>`${name} is ${age} years old`</code>
			</pre>
			<p class="note">Спецификация 12.2.9, 12.3.7</p>
		</div>
	</section>
	
	<section class="slide">
		<div>
			<h2>let + const</h2>
			<pre>
				<code class="language-javascript"> function f() {</code>
				<code>	<mark>let</mark> x; {</code>
				<code>		<mark>const</mark> x = "sneaky";	// ok, block scoped name</code>
				<code>		x = "foo";	// error, const</code>
				<code>	}</code>
				<code>	<mark>let</mark> x = "inner";	// error, already declared in block</code>
				<code>}</code>
			</pre>
			<p class="note">Спецификация 13.2.1</p>
		</div>
	</section>
	
	<section class="slide">
		<div>
			<h2>Сокращённый формат задания объектов</h2>
			<pre>
				<code class="language-javascript">var a = {&#39;obj1&#39;: obj1, &#39;obj2&#39;: obj2}</code>
				<code>// аналогично</code>
				<code>var a = {obj1, obj2}</code>
			</pre>
			<p class="note">Спецификация 13.2.1</p>
		</div>
	</section>

	<section class="slide">
		<div>
			<h2>Значения по умолчанию для аргументов функций</h2>
			<pre>
				<code class="language-javascript">function f(x, <mark>y=12</mark>) {</code>
				<code>	return x + y;</code>
				<code>}</code>
				<code>f(3) == 15 //true</code>
			</pre>
			<p class="note">Спецификация 19.2</p>
		</div>
	</section>

	<section class="slide shout">
		<div>
			<h2>Модули</h2>
			<p class="note">Спецификация 15.2</p>
		</div>
	</section>

	<section class="slide">
		<div>
			<h2>Модули</h2>
			<p>Позволяют загружать код по требованию (асинхронно) и обеспечивают уровень абстракции</p>
		</div>
	</section>

	<section class="slide">
		<div>
			<h2>Модули</h2>
			<b>Экспорт</b>
			<pre>
				<code class="language-javascript">// calculator/lib/calc.js</code>
				<code>let notExported = 'abc';</code>
				<code><mark>export</mark> function square(x) {</code>
				<code>    return x * x;</code>
				<code>}</code>
				<code><mark>export</mark> const MY_CONSTANT = 123;</code>
			</pre>
		</div>
	</section>

	<section class="slide">
		<div>
			<h2>Модули</h2>
			<b>Импорт</b>
			<pre>
				<code class="language-javascript">// calculator/main.js</code>
				<code><mark>import</mark> { square } from 'lib/calc';</code>
				<code>console.log(square(3));</code>
			</pre>
		</div>
	</section>

	<section class="slide">
		<div>
			<h2>Модули</h2>
			<b>Импорт</b>
			<pre>
				<code class="next language-javascript">import { square, MY_CONSTANT } from 'lib/calc';</code>
				<code class="next language-javascript">import 'lib/calc' as c;</code>
				<code class="next language-javascript">import { square as squ } from 'lib/calc';</code>
			</pre>
		</div>
	</section>

	<section class="slide">
		<div>
			<h2>Модули</h2>
			<b>Настройка загрузки модулей</b>
			<ul>
				<li class="next">проверка валидности модуля при импорте (к примеру при помощи JSHint)</li>
				<li class="next">автоматическая трансляция модулей при импорте (они могут содержать код CoffeeScript или TypeScript);</li>
				<li class="next">использовать существующие модули (AMD, Node.js)</li>
			</ul>
		</div>
	</section>

	<section class="slide shout">
		<div>
			<h2>Arrow-функции</h2>
			<p class="note">Спецификация 14.2</p>
		</div>
	</section>
	
	<section class="slide">
		<div>
			<h2>Arrow-функции</h2>
			<b>Для быстрого определения анонимных функций</b>
			<ul><code><mark>var</mark> x = <mark>function</mark>() {}</code>
				<li class="next">собственный scope</li>
				<li class="next">нет неявного return</li>
			</ul>
			<ul class="next"><code><mark>let</mark> x = () => {}</code>
				<li class="next">"лексический" scope</li>
				<li class="next">есть неявный return, но не всегда</li>
			</ul>
		</div>
	</section>

	<section class="slide">
		<div>
			<h2>Arrow-функции</h2>
			<b>По-старому: <mark>this</mark> is undefined</b>
			<pre>
				<code class="language-javascript">this.x = "yes";</code>
				<code>var y = <mark>function</mark>(){</code>
				<code> 	"use strict"</code>
				<code>	console.log(this.x)</code>
				<code>};</code>
				<code>y();	//TypeError...</code>
			</pre>
		</div>
	</section>

	<section class="slide">
		<div>
			<h2>Arrow-функции</h2>
			<b>По-новому: <mark>this</mark> из внешнего scope</b>
			<pre>
				<code class="language-javascript">this.x = "yes";</code>
				<code>let y = <mark>()</mark> => {</code>
				<code> 	"use strict"</code>
				<code>	console.log(this.x)</code>
				<code>};</code>
				<code>y();	//'yes'</code>
			</pre>
		</div>
	</section>

	<section class="slide">
		<div>
			<h2>Arrow-функции</h2>
			<b>Неявный return</b>
			<pre>
				<code class="language-javascript">let add = (a,b) => <mark>a + b;</mark></code>
				<code>add(2, 3);	//5</code>
			</pre>
			<b>Явный return</b>
			<pre>
				<code class="language-javascript">let add = (a,b) => <mark>{ return a + b };</mark></code>
				<code>add(2, 3);	//5</code>
			</pre>
		</div>
	</section>

	<section class="slide shout">
		<div>
			<h2>Symbol</h2>
			<p class="note">Спецификация 14.2</p>
		</div>
	</section>

	<section class="slide">
		<div>
			<h2>Тип Symbol</h2>
			<b>Применяется для идентификаторов свойств объектов.</b>
			<pre>
				<code class="language-javascript">var sym1 = Symbol();</code>
				<code>var sym2 = Symbol(&quot;foo&quot;);</code>
				<code>var sym3 = Symbol(&quot;foo&quot;);</code>
				<code> </code>
				<code>Symbol("foo") === Symbol("foo"); // false O_o</code>
			</pre>
		</div>
	</section>

	<section class="slide">
		<div>
			<h2>Тип Symbol</h2>
			<b>Пример</b>
			<pre>
				<code class="language-javascript">var MyClass = (function() {</code>
				<code>	var key = <mark>Symbol("key")</mark>; // module scoped symbol</code>
				<code>	function MyClass(prvtData) { <mark>this[key]</mark> = prvtData; }</code>
				<code>	return MyClass;</code>
				<code>})();</code>
				<code>var c = new MyClass("hello")</code>
				<code><mark>c["key"] === undefined</mark></code>
			</pre>
		</div>
	</section>

	<section class="slide">
		<div>
			<h2>Тип Symbol</h2>
			<b>Символы не приватные!</b>
			<p>Симовол <mark>уникален</mark>, но <mark>не приватен</mark>, т.к он может быть получен в результате рефлексии через метод
			<code class="language-javascript">Object.getOwnPropertySymbols</code> </p>
		</div>
	</section>

	<section class="slide shout">
		<div>
			<h2>Cтруктуры данных</h2>
			<p class="note">Спецификация 23.1 - 23.4</p>
		</div>
	</section>

	<section class="slide">
		<div>
			<h2>Map и Set</h2>
			<p>Упрощают работу со специфичными типами коллекций. Map позволяет определять коллекции наборов в формате ключ/значение. В качестве ключа и значения могут выступать любые выражения JavaScript. По аналогии Set позволяет задать множество любых выражений JavaScript</p>
		</div>
	</section>

	<section class="slide">
		<div>
			<h2>Map</h2>
			<pre>
				<code class="language-javascript">let data = new Map();</code>
				<code>data.set('key', 100);</code>
				<code>data.set(undefined, 'some text');</code>
				<code>data.has('tag');	//false</code>
				<code>data.has(undefined);	//true</code>
				<code>data.delete(undefined);</code>
				<code>data.has(undefined);	//false</code>
			</pre>
		</div>
	</section>

	<section class="slide">
		<div>
			<h2>Set</h2>
			<pre>
				<code class="language-javascript">let data = new Set([1, 3, 5, 3]);</code>
				<code>data.add(3);</code>
				<code>data.add(7);</code>
				<code>data.has(3);	//true</code>
				<code>data.has(9);	//false</code>
				<code>data.delete(3);</code>
				<code>data.has(3);	//false</code>
			</pre>
		</div>
	</section>
	
	<section class="slide">
		<div>
			<h2>WeakSet и WeakMap</h2>
			<p>То же самое, но <mark>безопасно</mark>, т.е не заботимся об утечках памяти!</p>
			<p>Объект удаляется, если на него больше не осталось ссылок, кроме ссылки из текущей коллекции, что позволяет не беспокоиться об утечках памяти.</p>
		</div>
	</section>

	<section class="slide">
		<div>
			<h2>WeakMap</h2>
			<pre>
				<code class="language-javascript">let a = document.querySelector('a');</code>
				<code>let data = new WeakMap();</code>
				<code>data.set(a, 'some text');</code>
				<code>data.has(a);	//true</code>
				<code>data.get(a);	//"some text"</code>
				<code>a = null;</code>
				<code>data.has(a);	//false</code>
			</pre>
		</div>
	</section>

	<section class="slide shout">
		<div>
			<h2>For-of</h2>
		</div>
	</section>

	<section class="slide">
		<div>
			<h2>For-of</h2>
			<b>Как 20 лет назад...</b>
			<pre>
				<code class="language-javascript">for (var index = 0; index < myArray.length; index++) {</code>
				<code>	console.log(myArray[index]);</code>
				<code>}</code>
			</pre>
		</div>
	</section>

	<section class="slide">
		<div>
			<h2>For-of</h2>
			<b>Как в ES5</b>
			<pre>
				<code class="language-javascript">myArray.forEach(function (value) {</code>
				<code>	console.log(value);</code>
				<code>});</code>
			</pre>
		</div>
	</section>

	<section class="slide">
		<div>
			<h2>For-of</h2>
			<b>А как насчет For-in?</b>
			<pre>
				<code class="language-javascript">for (var index in myArray) {</code>
				<code>	console.log(myArray[index]);</code>
				<code>}</code>
			</pre>
			<ul class="next"> но так делать не стоит...
				<li class="next">строковая арифметика (index - строка)</li>
				<li class="next">вероятность прохода лишний раз по элементам</li>
				<li class="next">проход в случайном порядке! О_о</li>
			</ul>
		</div>
	</section>

	<section class="slide">
		<div>
			<h2>For-of</h2>
			<b>Нас спасет!</b>
			<pre>
				<code class="language-javascript">for (var index of myArray) {</code>
				<code>	console.log(myArray[index]);</code>
				<code>}</code>
			</pre>
			<ul class="next"> Выглядит неплохо
				<li>самый лаконичный и наглядный синтаксис</li>
				<li>нет недостатков for-in</li>
				<li>в отличие от forEach(), он работает с break, continue и return</li>
			</ul>
		</div>
	</section>

	<section class="slide">
		<div>
			<h2>For-of</h2>
			<b>Итог</b>
			<ul>
				<li class="next"><mark>for-in</mark> нужен для перебора свойств объекта.</li>
				<li class="next"><mark>for-of</mark> нужен для перебора данных, например, значений массива</li>
				<li class="next">for-of также хорошо работает с большинством массивоподобных объектов, вроде списков NodeList в DOM</li>
				<li class="next">Работает с объектами Map и Set</li>
				<li class="next">Работает со строками, рассматривая строку как набор символов Unicode</li>
			</ul>
		</div>
	</section>

	<section class="slide shout">
		<div>
			<h2>Генераторы</h2>
			<p class="note">Спецификация 25.2</p>
		</div>
	</section>
	
	<section class="slide">
		<div>
			<h2>Генераторы</h2>
			<p>Генератор - позволяет организовать эффективное выполнение функций в асинхронном режиме.</p>
		</div>
	</section>

	<section class="slide shout">
		<div>
			<h2><a target="_blank" href="http://people.mozilla.org/~jorendorff/demos/meow.html">Говорящий кот</a></h2>
		</div>
	</section>

	<section class="slide">
		<div>
			<h2>Генераторы</h2>
			<b>В чем польза?</b>
			<ul>
				<li><a target="_blank" href="http://codepen.io/greybax/pen/MwBzaN">Реализация итератора</a></li>
				<li><a target="_blank" href="http://codepen.io/greybax/pen/JdBeGR">Реализация генератора</a></li>
				
			</ul>
		</div>
	</section>

	<section class="slide">
		<div>
			<h2>Генераторы</h2>
			<b>Где применить возможность генераторов вести себя как итераторы?</b>
			<ul>
				<li>Преобразование любого объекта в итерируемый</li>
				<li>Упрощение функций, создающих массивы</li>
				<li>Результаты необычной длины</li>
				<li>Рефакторинг сложных циклов</li>
				<li>Утилиты для работы с итерируемыми объектами</li>
			</ul>
		</div>
	</section>

	<section class="slide">
		<div>
			<h2>Генераторы</h2>
			<b>Генератор это</b>
			<ul>
				<li class="next">Итератор, а итератор — это новый стандарт для данных и циклов во всём ES6</li>
				<li class="next">Попытка избежать спагетти кода в асинхронном коде. К примеру <a href="https://github.com/kriskowal/q/tree/v1/examples/async-generators">Q.async()</a> - это экспериментальная попытка сделать асинхронный код похожим на синхронный при помощи генераторов и промисов</li>
			</ul>
		</div>
	</section>

	<section class="slide shout">
		<div>
			<h2>Promise</h2>
			<p class="note">Спецификация 25.4</p>
		</div>
	</section>
	
	<section class="slide">
		<div>
			<h2>Promise</h2>
			<p>Предназначен для получения значений в асинхронном режиме. Позволяет определить значение, которое пока неизвестно, но будут определено через какое-то время</p>
		</div>
	</section>

	<section class="slide">
		<div>
			<h2>Promise</h2>
			<pre>
				<code class="language-javascript">          };</code>
				<code>        })</code>
				<code>      });</code>
				<code>    });</code>
				<code>  });</code>
				<code>});</code>
			</pre>
			<b class="next">Это боль...</b>
		</div>
	</section>

	<section class="slide">
		<div>
			<h2>Promise</h2>
			<pre>
				<code class="language-javascript">new <mark>Promise</mark>(<mark>resolve</mark>, <mark>reject</mark>) {</code>
				<code>	if (testSomething) {</code>
				<code>		<mark>resolve</mark>(resValue);</code>
				<code>	} else {</code>
				<code>		<mark>reject</mark>(errValue);</code>
				<code>});</code>				
			</pre>
		</div>
	</section>

	<section class="slide">
		<div>
			<h2>Promise</h2>
			<pre>
				<code class="language-javascript">requestFromServer()</code>
				<code>.then(function(res) {return res2;})</code>
				<code>.then(function(res2) {return res3;})</code>
				<code>...</code>
				<code>.then(function(res3) {return res4;})</code>
			</pre>
			<b class="next">Так лучше!</b>
		</div>
	</section>

	<section class="slide shout">
		<div>
			<h2>Классы</h2>
			<p class="note">Спецификация 14.5</p>
		</div>
	</section>

	<section class="slide">
		<div>
			<h2>Классы</h2>
			<pre>
				<code class="language-javascript">class Animal {</code>
				<code>	constructor() {</code>
				<code>		this.speed = 0;</code>
				<code>	}</code>
				<code>toString() {</code>
				<code>	return this.speed === 0 ? ' sleep' : ' play' }</code>
				<code>}</code>
			</pre>
		</div>
	</section>

	<section class="slide">
		<div>
			<h2>Классы</h2>
			<b>extends</b>
			<pre>
				<code class="language-javascript">class Cat extends Animal {</code>
				<code>	constructor() {</code>
				<code>		<mark>super();</mark></code>
				<code>		this.speed = 10;</code>
				<code>	}</code>
				<code>}</code>
			</pre>
		</div>
	</section>

	<section class="slide">
		<div>
			<h2>Классы</h2>
			<pre>
				<code class="language-javascript">let dog = new Animal();</code>
				<code>let cat = new Cat();</code>
				<code>console.log(dog.toString());	// sleep</code>
				<code>console.log(cat.toString());	// play</code>
				<code>console.log(cat instanceof Animal);	// true</code>
				<code>console.log(cat instanceof Cat);	// true</code>
			</pre>
		</div>
	</section>

	<section class="slide">
		<div>
			<h2>Классы</h2>
			<b>static</b>
			<pre>
				<code class="language-javascript">class Util {</code>
				<code>	<mark>static</mark> inc(x) {return x + 1},</code>
				<code>	<mark>static</mark> dec(x) {return x - 1}</code>
				<code>}</code>
				<code>console.log(Util.inc(5));	// 6</code>
			</pre>
		</div>
	</section>

	<section class="slide">
		<div>
			<h2>Классы</h2>
			<b>get/set</b>
			<pre>
				<code class="language-javascript">class O {</code>
				<code>	constructor() {</code>
				<code>		this.mx = 'initial';</code>
				<code>	}</code>
				<code><mark>get</mark> x() { return this.mx; }</code>
				<code><mark>set</mark> x(val) { this.mx = val; }</code>
				<code>}</code>
			</pre>
		</div>
	</section>

	<section class="slide">
		<div>
			<h2>Классы</h2>
			<b>"поднятие"</b>
			<pre>
				<code class="language-javascript">var a = new ClassA(2);	<mark>// ReferenceError</mark></code>
				<code>class ClassA {</code>
				<code>	constructor(n) {</code>
				<code>		this.x = n;</code>
				<code>	}</code>
				<code>}</code>
			</pre>
		</div>
	</section>

	<section class="slide">
		<div>
			<h2>Новые методы базовых объектов</h2>
			<ul>
				<li>String</li>
				<li>Object</li>
				<li>Array</li>
				<li>Number</li>
				<li>Math</li>
			</ul>
		</div>
	</section>

	<section class="slide">
		<div>
			<h2>Новые методы базовых объектов</h2>
			<pre>
				<code class="language-javascript">Object.is(0, -0); // false</code>
				<code>Object.is(NaN, NaN) // <mark>true</mark>!</code>
				<code> </code>
				<code>0 === -0; // true</code>
				<code>NaN === NaN; // false</code>
			</pre>
		</div>
	</section>
	
	<section class="slide shout">
		<div>
			<h2>Ситуация сейчас</h2>
		</div>
	</section>

	<section class="slide cover" id="kangax">
		<div>
			<img src="pictures/kangax.png" alt="">
		</div>
	</section>

	<section class="slide shout">
		<div>
			<h2>Хочу использовать уже сейчас!</h2>
		</div>
	</section>
	
	<section class="slide">
		<div>
			<h2>Как использовать новые возможности ES2015 уже сейчас?</h2>
			<ul>
				<li>chrome://flags/ -&gt; Включить
					<img src="pictures/harmony.png" alt="harmony">
				</li>
				<li class="next">использовать транспайлеры <a target="_blank" href="https://github.com/addyosmani/es6-tools">es6-tools</a></li>
			</ul>
		</div>
	</section>

	<section class="slide shout">
		<center style="margin-top: 10%;">
			<img src="pictures/babel.png" alt="">
		</center>
	</section>
	
	<section class="slide">
		<div>
			<h2>Что умеет Babel?</h2>
			<ul>
				<li class="next">Поддержка новых фич и синтаксиса ES2015(ES6)</li>
				<li class="next">Поддержка новых фич и синтаксиса ES2016(ES7)</li>
				<li class="next">Транспайлинг некоторых фич напрямую в ES5</li>
				<li class="next">Поддержка некоторых фич через полифилы</li>
				<li class="next">Поддерживается пока не все (в частности Proxy)</li>
			</ul>
		</div>
	</section>

	<section class="slide shout">
		<div>
			<h2>Что дальше?</h2>
		</div>
	</section>

	<section class="slide">
		<div>
			<h2>Будущее Javascript</h2>
			<ul>
				<li class="next">Транспайлинг - не только как переходный этап</li>
				<li class="next">Как только браузер начнет поддерживать новую фичу, отключаем ее транспайлинг</li>
			</ul>
		</div>
	</section>
	
	<section class="slide shout">
		<div>
			<h2>И это еще не все...</h2>
		</div>
	</section>
	
	<section class="slide">
		<div>
			<h2>Ссылки</h2>
			<ul>
				<li><a target="_blank" href="http://www.ecma-international.org/ecma-262/6.0/">Официальная спецификация ES 2015</a></li>
				<li><a target="_blank" href="http://exploringjs.com/">Exploring ES6: Upgrade to the next version of JavaScript</a></li>
				<li><a target="_blank" href="http://es6-features.org">es6-features.org</a></li>
				<li><a target="_blank" href="https://hacks.mozilla.org/category/es6-in-depth/">Цикл статей ES6 In Depth</a></li>
			</ul>
		</div>
	</section>

	<section class="slide shout">
		<div>
			<h2>Спасибо!</h2>
		</div>
	</section>

	<section class="slide shout grow">
		<div>
			<h2>Вопросы?</h2>
		</div>
	</section>
	
	<div class="progress"><div></div></div>
	<script src="shower/shower.min.js"></script>
	<!-- Shower: http://shwr.me -->
</body>
</html>