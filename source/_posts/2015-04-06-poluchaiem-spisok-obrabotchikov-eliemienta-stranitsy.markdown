---
layout: post
title: "Получаем список обработчиков элемента в DOM'е"
date: 2015-04-10 16:55:10 +0000
comments: true
categories: 
 - frontend
 - javascript
---

Допустим, что у нас есть элемент на странице. Пусть это будет ```div```. Наша задача - получить все обработчики этого элемента. Рассмотрим варианты решения этой задачи в различных браузерах, а именно ```IE```, ```Firefox```, ```Chrome```. В каждом современном браузере в консоли разработчка есть специальный UI для этих целей. Например в ```Chrome``` это ```DevTools``` -> ```Elements``` -> ```Выбрать интересующий DOM узел``` -> ```Вкладка Event Listeners```. В нашем случае, поговорим о получании списка обработчиков программно.

### Способ 1
* Использовать метод ```getEventListeners(target)```. В браузере ```Chrome``` (является методом DevTools API) этот метод работает без лишних телодвижений - возвращает объект-массив эвентов на целевом элементе.

* Ситуация с ```Firefox``` немного сложнее. Данный метод доступен после установки ```Firebug``` [GetEventListeners](http://getfirebug.com/wiki/index.php/GetEventListeners).

* В ```IE``` все совсем плохо, т.к такой метод не реализован в API консоли разработчика и нет extensions с его аналогами (я таких не нашел).

### Способ 2
Итак, мы выяснили, что метод ```getEventListeners``` не является кроссбраузерным и является частью Developer Console API, поэтому рассмотрим следующий ~~~костыль~~~ вариант решения. Для этого нам придется переопределить нативные методы ```Element.prototype.addEventListener``` и ```Element.prototype.removeEventListener``` (для старых версий ```IE``` нужно переопределить свои аналоги) своими кастомными реализациями которые будут отслеживать ```event listeners```.

<p data-height="268" data-theme-id="0" data-slug-hash="RNzGwj" data-default-tab="result" data-user="greybax" class='codepen'>See the Pen <a href='http://codepen.io/greybax/pen/RNzGwj/'>RNzGwj</a> by Alex Filatov (<a href='http://codepen.io/greybax'>@greybax</a>) on <a href='http://codepen.io'>CodePen</a>.</p>
<script async src="//assets.codepen.io/assets/embed/ei.js"></script>

***Плюс***:

* Это единственный способ получить все обработчики событий (в том числе, зарегистрированные сторонними библиотеками, например, ```jQuery```)

***Минус***:

* Cкрипт, который выполняет переопределение, должен быть выполнен первым - до ```jQuery/Prototype/``` и др., т.к иначе ```event listeners```, зарегистрированные через эти сценарии будут не отражены.

### Способ 3
Можно ничего не писать и использовать сторонние реализации функции, например [эту](https://github.com/alvinteh/geteventlisteners).

***Минусы***:

* Плагин, в состоянии обнаружить и получить обработчики событий, зарегистрированные ***только*** через ```jQuery```.
* Завязан на ```jQuery``` версии >=1.8.

### Итог
Универсального (кроссбраузерного) и по-настоящему хорошего варианта, к сожалению, сейчас не существует.